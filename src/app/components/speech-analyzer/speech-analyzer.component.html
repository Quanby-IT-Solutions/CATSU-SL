<!-- <div class="flex flex-col max-w-full m-10">
  <header class="flex gap-1.5 items-center self-start text-3xl font-extrabold text-black whitespace-nowrap">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-[50px] h-[50px]">
      <path stroke-linecap="round" stroke-linejoin="round" d="M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z" />
    </svg>
    <h1 class="self-stretch my-auto w-[302px] text-2xl">SpeechAssess</h1>
  </header>
  <nav class="flex gap-2.5 items-center mt-2.5 w-full text-lg text-center text-white max-md:max-w-full">
    <button [routerLink]="['/student/speech-analyzer/record-speech']"  class="flex flex-col self-stretch my-auto whitespace-nowrap rounded-2xl w-[120px]">
      <span class="px-8 py-1.5 bg-amber-500 rounded-2xl max-md:px-4 text-sm">Record</span>
    </button>
    <button [routerLink]="['/student/speech-analyzer/record-list']" class="flex flex-col self-stretch my-auto whitespace-nowrap rounded-2xl w-[120px]">
      <span class="px-5 py-1.5 rounded-2xl bg-slate-800 max-md:px-4 text-sm">Recordings</span>
    </button>
    <button [routerLink]="['/student/speech-analyzer/record-report']" class="flex flex-col self-stretch my-auto whitespace-nowrap rounded-2xl w-[120px]">
      <span class="px-5 py-1.5 rounded-2xl bg-slate-800 max-md:px-4 text-sm">Evaluation Report</span>
    </button>
  </nav>
</div> -->


<div class="flex flex-col items-center justify-center min-h-screen bg-gray-100 p-4">
  <h1 class="text-3xl font-bold mb-6 text-center">Speech Analyzer</h1>

  <div class="w-full max-w-2xl bg-white rounded-lg shadow-md p-6 mb-6">
    <h2 class="text-xl font-semibold mb-2">Speech Sample</h2>
    <p class="text-gray-700 mb-4">{{ speechSample }}</p>
    <button (click)="generateNewSpeechSample()" class="mb-4 bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded">
      Generate New Sample
    </button>
    
    <div class="flex justify-center">
      <button 
        (click)="toggleRecording()" 
        [disabled]="isAnalyzing"
        class="w-16 h-16 rounded-full flex items-center justify-center text-white transition duration-300 ease-in-out"
        [ngClass]="{'bg-blue-500 hover:bg-blue-600': !recording, 'bg-red-500 hover:bg-red-600': recording, 'opacity-50 cursor-not-allowed': isAnalyzing}"
      >
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-10 h-10">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 18.75v1.5m0-1.5a6.75 6.75 0 006.75-6.75v-3a6.75 6.75 0 10-13.5 0v3A6.75 6.75 0 0012 18.75zm0 0a3.75 3.75 0 01-3.75-3.75m7.5 0a3.75 3.75 0 01-7.5 0" />
        </svg>
      </button>
    </div>

    <p class="mt-2 text-sm text-center text-gray-600">
      {{ recording ? 'Recording... Click to stop' : 'Click to start recording' }}
    </p>
  </div>

  <!-- Upload Progress -->
  <div *ngIf="uploadProgress > 0 && uploadProgress < 100" class="w-full max-w-2xl mb-6">
    <div class="w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700">
      <div class="bg-blue-600 h-2.5 rounded-full" [style.width]="uploadProgress + '%'"></div>
    </div>
    <p class="text-sm text-gray-600 mt-2 text-center">Uploading: {{ uploadProgress }}%</p>
  </div>

  <!-- Loading indicator -->
  <div *ngIf="isAnalyzing" class="mb-6">
    <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"></div>
    <p class="mt-2 text-sm text-gray-600">Analyzing speech...</p>
  </div>

  <!-- Display the analysis result if available -->
  <div *ngIf="analysisResult" class="w-full max-w-2xl bg-white rounded-lg shadow-md p-6">
    <h2 class="text-xl font-semibold mb-4">Speech Analysis Result</h2>
    <div *ngFor="let result of analysisResult" class="mb-4">
      <h3 class="text-lg font-semibold">{{ result.area | titlecase }}</h3>
      <div class="flex items-center mb-2">
        <div class="w-full bg-gray-200 rounded-full h-2.5 mr-2">
          <div class="bg-blue-600 h-2.5 rounded-full" [style.width]="result.score + '%'"></div>
        </div>
        <span class="text-sm font-semibold">{{ result.score }}/100</span>
      </div>
      <p class="text-sm text-gray-700">{{ result.feedback }}</p>
    </div>
    <h3 class="text-lg font-semibold mt-6 mb-2">Overall Summary</h3>
    <p class="text-sm text-gray-700">{{ summary }}</p>
  </div>
</div>