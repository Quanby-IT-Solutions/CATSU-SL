<div class="w-full py-6 overflow-hidden bg-white h-dvh md:py-4">
  <div class="h-full w-full flex flex-col gap-12 max-w-[90%] mx-auto  ">
    <div class="h-fit !justify-between flex items-center space-x-4">
      <div
        class="p-3 duration-300 border border-gray-400 rounded shadow-md cursor-pointer hover:scale-105 hover:ease-out newclass">
        <button class="flex items-center poppins-b" (click)="openModal()">
          <span class="mr-2 plus-icon"></span>
          NEW CLASS
        </button>
      </div>

      <div class="hidden img md:block">
        <img src="assets/teacher/manageclass/image_vector.png" alt="image" />
      </div>
      <div
        class="p-3 duration-300 border border-gray-400 rounded shadow-md cursor-pointer hover:scale-105 hover:ease-out newclass">
        <button class="flex items-center poppins-b" (click)="openStudentModal()">

          STUDENTS
        </button>
      </div>
    </div>
    <!-- bottom -->

    <div class="flex flex-col w-full h-full">
      <h1 class="mb-4 text-3xl text-center poppins-b text-primary-2">
        List of Classes
      </h1>

      <div class="w-full min-h-[20dvh] max-h-[50dvh] bg-white border border-primary-2 rounded overflow-y-auto">
        <table class="w-full">
          <thead>
            <tr>
              <th class="text-sm lg:text-base">Duration</th>

              <th class="text-sm lg:text-base">Course</th>
              <th class="text-sm lg:text-base">Class Name</th>
              <th class="text-sm lg:text-base">Class Code</th>
              <th class="text-sm lg:text-base">Student Count</th>
              <th class="text-sm lg:text-base">Action</th>
            </tr>
          </thead>
          <tbody *ngFor="let class of classes">
            <tr (click)="selectClass(class.id)" class="select-none hover:bg-blue-100 active:bg-blue-200"
              [ngClass]="{ 'bg-white': selectedClass == class.id }">
              <td class="text-xs lg:text-base">{{ class.duration }} days</td>
              <td class="text-xs lg:text-base">{{ class.course }}</td>
              <td class="text-xs lg:text-base">{{ class.class }}</td>
              <td class="text-xs lg:text-base">{{ class.classcode }}</td>
              <td class="text-xs lg:text-base">{{ class.studentcount }}</td>
              <td class="justify-center space-x-2 text-center">
                <button (click)="openEditModal(
                      class.id,
                      class.class,
                      class.classcode,
                      parsetime(class.schedule)[0],
                      parsetime(class.schedule)[1],
                      class.courseid
                    )" class="cursor-pointer">
                  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5">
                    <path
                      d="M20.1497 7.93997L8.27971 19.81C7.21971 20.88 4.04971 21.3699 3.27971 20.6599C2.50971 19.9499 3.06969 16.78 4.12969 15.71L15.9997 3.84C16.5478 3.31801 17.2783 3.03097 18.0351 3.04019C18.7919 3.04942 19.5151 3.35418 20.0503 3.88938C20.5855 4.42457 20.8903 5.14781 20.8995 5.90463C20.9088 6.66146 20.6217 7.39189 20.0997 7.93997H20.1497Z"
                      stroke="green" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                    <path d="M21 21H12" stroke="green" stroke-width="1.5" stroke-linecap="round"
                      stroke-linejoin="round"></path>
                  </svg>
                </button>
                <button (click)="deleteClass(class.id)" class="cursor-pointer">
                  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5">
                    <path d="M4 7H20" stroke="red" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    </path>
                    <path d="M6 7V18C6 19.6569 7.34315 21 9 21H15C16.6569 21 18 19.6569 18 18V7" stroke="red"
                      stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                    <path d="M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5V7H9V5Z" stroke="red"
                      stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                  </svg>
                </button>
              </td>


            </tr>
          </tbody>
        </table>
      </div>
    </div>

  </div>
</div>

<div *ngIf="studentModal" class="fixed inset-0 z-[1000] bg-black/50 flex items-center justify-center">
  <div class="relative flex flex-col items-center p-8 bg-white rounded-lg h-1/2 full">
    <div class="flex items-center justify-between w-full mb-4">
      <h2 class="text-xl font-bold text-gray-600">List of Students</h2>
      <button (click)="closeStudentModal()" class="absolute text-2xl text-red-500 top-2 right-4 hover:text-red-700">
        <i class="fas fa-times"></i>
      </button>
    </div>

    <!-- list-->

    <div class="!w-full table-container rounded">
      <table class="w-full">
        <thead>
          <tr>
            <th class="text-sm lg:text-base">Name of Student</th>
            <th class="text-sm lg:text-base">
              Course
              <select [(ngModel)]="selectedCourseFilter" (change)="applyFilters()" class="p-1 ml-2 text-xs text-[--primary-color] border rounded">
                <option *ngFor="let course of uniqueCourses" [value]="course">{{course}}</option>
              </select>
            </th>
            <th class="text-sm lg:text-base">
              Class Name
              <select [(ngModel)]="selectedClassFilter" (change)="applyFilters()" class="p-1 ml-2 text-[--primary-color] text-xs border rounded">
                <option *ngFor="let class of uniqueClasses" [value]="class">{{class}}</option>
              </select>
            </th>
            <th class="text-sm text-center lg:text-base">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let student of filteredStudents"
              class="cursor-pointer select-none hover:bg-blue-100 active:bg-blue-200"
              [ngClass]="{ 'bg-white': selectedStudent == student.id }">
            <td class="text-xs lg:text-base">{{ student.firstname }} {{student.lastname}}</td>
            <td class="text-xs lg:text-base">{{student.course}}</td>
            <td class="text-xs lg:text-base">{{student.class}}</td>
            <td class="justify-center space-x-2 text-center">
              <i class="text-teal-500 cursor-pointer far fa-eye" (click)="viewStudentProfile(student)"></i>
              <i class="text-red-500 cursor-pointer fa-solid fa-trash" (click)="openConfirmDelete(student)"></i>
            </td>
          </tr>
        </tbody>
      </table>

      <div *ngIf="editStudentProfile"
      class="fixed inset-0 z-[1000] overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center">
   <div class="w-full max-w-md p-6 mx-4 my-8 bg-white rounded-lg shadow-xl">
     <div class="flex items-center justify-between mb-6">
       <h2 class="text-2xl font-bold text-gray-800">Student's Profile</h2>
       <button (click)="closeStudentProfileModal()"
               class="text-gray-500 transition-colors duration-200 hover:text-gray-700">
         <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg">
           <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
         </svg>
       </button>
     </div>

     <div *ngIf="selectedStudentId">
       <div class="flex flex-col items-center w-full mb-6">
         <div class="w-24 h-24 mb-4 overflow-hidden border-4 border-teal-500 rounded-full">
           <img [src]="student.profile ? getURL(student.profile) : noProfile()"
                class="object-cover w-full h-full" alt="Profile Image" />
         </div>
         <div *ngIf="!editing" class="text-2xl font-bold text-teal-600">
           {{ student.firstname }} {{ student.lastname }}
         </div>
         <div *ngIf="editing" class="flex w-full space-x-2">
           <input type="text" [(ngModel)]="student.firstname"
                  class="w-full px-2 py-1 text-lg font-semibold text-teal-600 border border-gray-300 rounded">
           <input type="text" [(ngModel)]="student.lastname"
                  class="w-full px-2 py-1 text-lg font-semibold text-teal-600 border border-gray-300 rounded">
         </div>
       </div>

       <div class="space-y-4">
         <div class="grid grid-cols-2 gap-2">
           <div class="font-medium text-gray-600">Email Address:</div>
           <div *ngIf="!editing" class="text-gray-800">{{ student.email }}</div>
           <input *ngIf="editing" type="email" [(ngModel)]="student.email"
                  class="w-full px-2 py-1 text-gray-800 border border-gray-300 rounded">

           <div class="font-medium text-gray-600">Birthday:</div>
           <div *ngIf="!editing" class="text-gray-800">{{ student.birthdate }}</div>
           <input *ngIf="editing" type="date" [(ngModel)]="student.birthdate"
                  class="w-full px-2 py-1 text-gray-800 border border-gray-300 rounded">

           <div class="font-medium text-gray-600">Sex:</div>
           <div *ngIf="!editing" class="text-gray-800">{{ student.gender }}</div>
           <select *ngIf="editing" [(ngModel)]="student.gender"
                   class="w-full px-2 py-1 text-gray-800 border border-gray-300 rounded">
             <option value="Male">Male</option>
             <option value="Female">Female</option>
             <option value="Other">Other</option>
           </select>

           <div class="font-medium text-gray-600">Nationality:</div>
           <div *ngIf="!editing" class="text-gray-800">{{ student.nationality }}</div>
           <input *ngIf="editing" type="text" [(ngModel)]="student.nationality"
                  class="w-full px-2 py-1 text-gray-800 border border-gray-300 rounded">

           <div class="font-medium text-gray-600">Address:</div>
           <div *ngIf="!editing" class="text-gray-800">{{ student.address }}</div>
           <input *ngIf="editing" type="text" [(ngModel)]="student.address"
                  class="w-full px-2 py-1 text-gray-800 border border-gray-300 rounded">
         </div>
       </div>
     </div>

     <div class="flex justify-center w-full mt-8">
       <button (click)="toggleEdit()"
               class="bg-teal-500 hover:bg-teal-600 w-full text-white font-bold py-2.5 rounded-xl transition-colors duration-200">
         {{ editing ? 'SAVE' : 'EDIT' }}
       </button>
     </div>
   </div>
 </div>

      <div *ngIf="confirmDelete" class="fixed inset-0 z-20 flex items-center justify-center bg-gray-500 bg-opacity-70">
        <div class="flex flex-col items-center justify-center w-1/4 p-8 bg-white rounded-lg h-1/4">

          <h2 class="mb-4 text-xl font-bold">Delete Student?</h2>

          <div class="flex flex-row-reverse justify-center gap-x-6">
            <div class="flex justify-center w-10 h-10 bg-red-500 rounded-full">
              <button class="text-xl text-white" (click)=" noConfirmDelete()">
                <i class="fas fa-times"></i>
              </button>
            </div>
            <div class="flex justify-center w-10 h-10 bg-green-500 rounded-full">
              <button class="text-xl text-white" (click)=" yesConfirmDelete()">
                <i class="fas fa-check"></i>
              </button>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>



  <!-- <div class="-mr-2 regwrap"> -->
<!-- <div class="approve">
            <div class="regcontent">
                <div class="table">
                    <h1 class="poppins-b">Approve Registration</h1>
                    <table class="poppins">
                        <tbody class="h-36">
                            <tr>
                                <td class="border student">student 1</td>
                                <td class="border btn1"><button>View</button></td>
                                <td class="border btn2"><button>Remove</button></td>
                            </tr>
                            <tr>
                                <td class="border student">student 1</td>
                                <td class="border btn1"><button>View</button></td>
                                <td class="border btn2"><button>Remove</button></td>
                            </tr>
                            <tr>
                                <td class="border student">student 1</td>
                                <td class="border btn1"><button>View</button></td>
                                <td class="border btn2"><button>Remove</button></td>
                            </tr>
                            <tr>
                                <td class="border student">student 1</td>
                                <td class="border btn1"><button>View</button></td>
                                <td class="border btn2"><button>Remove</button></td>
                            </tr>
                            <tr>
                                <td class="border student">student 1</td>
                                <td class="border btn1"><button>View</button></td>
                                <td class="border btn2"><button>Remove</button></td>
                            </tr>

                        </tbody>
                    </table>
                </div>
            </div>
        </div> -->

<!-- <div class="pendingwrap">
            <div class="pending">
                <div class="pendingcontent">
                    <div class="table">
                        <div class="title">
                            <h1 class="poppins-b">Pending Registration</h1>
                            <div class="poppins-b titlecont">Auto Accept<input type="checkbox" id="switch" /><label for="switch">Toggle</label></div>
                        </div>
                        <table class="poppins">
                            <tbody>
                            <tr>
                                <td class="border student">student 1</td>
                                <td class="border btn1"><button>Accept</button></td>
                                <td class="border btn2"><button>Reject</button></td>
                            </tr>
                            <tr>
                                <td class="border student">student 1</td>
                                <td class="border btn1"><button>Accept</button></td>
                                <td class="border btn2"><button>Reject</button></td>
                            </tr>
                            <tr>
                                <td class="border student">student 1</td>
                                <td class="border btn1"><button>Accept</button></td>
                                <td class="border btn2"><button>Reject</button></td>
                            </tr>
                            <tr>
                                <td class="border student">student 1</td>
                                <td class="border btn1"><button>Accept</button></td>
                                <td class="border btn2"><button>Reject</button></td>
                            </tr>
                            <tr>
                                <td class="border student">student 1</td>
                                <td class="border btn1"><button>Accept</button></td>
                                <td class="border btn2"><button>Reject</button></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div> -->
<!--
        <div class="analytics">
            <button class="poppins" routerLink="/teacher/studentA&D">CLASS ANALYTICS <img src="assets/teacher/manageclass/Receive.png" alt=""></button>
        </div> -->
<!-- </div> -->
