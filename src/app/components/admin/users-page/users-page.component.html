<div class="main-container">
  <div class="button-container">
    <button class="poppins-b delete" (click)="delete()" *ngIf="selectedOption === 'Students' || selectedOption === 'Teachers' || selectedOption === 'Administrators'">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor" class="mr-2 icon">
        <path d="M3 6h18v2H3V6zm2 2v14h12V8H5zm4 2h2v10H9V10zm4 0h2v10h-2V10z"/>
        <path fill="none" d="M0 0h24v24H0z"/>
      </svg>
      <span>Delete</span>
    </button>
    <button class="poppins-b" *ngIf="selectedOption === 'Teachers'" (click)="addTeachers()">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor" class="icon">
        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
        <path fill="none" d="M0 0h24v24H0z"/>
      </svg>
      <span>Add Teacher</span>
    </button>
    <button class="poppins-b" *ngIf="selectedOption === 'Administrators'" (click)="addPrincipal()">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor" class="icon">
        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
        <path fill="none" d="M0 0h24v24H0z"/>
      </svg>      <span>Add Admin</span>
    </button>

    <!-- <button class="poppins-b" *ngIf="selectedOption === 'Students'" (click)="addStudents()">
      <img src="assets/add.png" alt="Add Icon" />
      <span>Add Student</span>
    </button> -->

    <button class="poppins-b add2" *ngIf="selectedOption === 'Teachers'" (click)="editDetailsTeacher()">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor" class="icon">
        <path d="M3 17.25V21h3.75l11.07-11.07-3.75-3.75L3 17.25zm18-11.66l-2.34-2.34a1.03 1.03 0 00-1.46 0l-2.34 2.34 3.75 3.75 2.34-2.34a1.03 1.03 0 000-1.46z"/>
      </svg>      <span>Edit</span>
    </button>
    <button class="poppins-b add2" *ngIf="selectedOption === 'Students'" (click)="editDetailsStudent()">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor" class="icon">
        <path d="M3 17.25V21h3.75l11.07-11.07-3.75-3.75L3 17.25zm18-11.66l-2.34-2.34a1.03 1.03 0 00-1.46 0l-2.34 2.34 3.75 3.75 2.34-2.34a1.03 1.03 0 000-1.46z"/>
      </svg>      <span>Edit</span>
    </button>
    <button class="poppins-b add2" *ngIf="selectedOption === 'Administrators'" (click)="editDetailsPrincipal()">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor" class="icon">
        <path d="M3 17.25V21h3.75l11.07-11.07-3.75-3.75L3 17.25zm18-11.66l-2.34-2.34a1.03 1.03 0 00-1.46 0l-2.34 2.34 3.75 3.75 2.34-2.34a1.03 1.03 0 000-1.46z"/>
      </svg>      <span>Edit</span>
    </button>

    <div class="button-container dropdown">
      <button
        class="poppins-b"
        (click)="toggleDropdown()"
        [ngClass]="{ active: isDropdownOpen }"
      >
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor" class="icon">
        <path d="M7 10l5 5 5-5H7z"/>
      </svg>        <span *ngIf="selectedOption === 'Students'">Students</span>
        <span *ngIf="selectedOption === 'Teachers'">Teachers</span>
        <span *ngIf="selectedOption === 'Administrators'">Admin</span>
        <div *ngIf="isDropdownOpen" class="dropdown-content">
          <button
            class="dropdown-value poppins"
            (click)="selectOption('Students')"
          >
            Students
          </button>
          <button
            class="dropdown-value poppins"
            (click)="selectOption('Teachers')"
          >
            Teachers
          </button>
          <button
          class="dropdown-value poppins"
          (click)="selectOption('Administrators')"
        >
          Admin
        </button>
        </div>
      </button>
    </div>
  </div>

  <div class="table-container">
    <table>

        <ng-container *ngIf="selectedOption == 'Students' else ifOption">
          <thead class="poppins-b">
            <tr>
              <th>Student ID</th>
              <th>Last Name</th>
              <th>First Name</th>
              <th>Email</th>
              <th>Last Seen</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody class="poppins">
          <tr *ngFor="let student of students" (click)="selectUser(student)" [ngClass]="{ 'selected': selectedUser === student }">
            <td *ngIf="!student.token">{{ student.visibleid }}</td>
            <td *ngIf="student.token"> ----------- </td>
            <td>{{ student.lastname }}</td>
            <td>{{ student.firstname }}</td>
            <td>{{ student.email }}</td>
            <td *ngIf="!student.token">{{ parseDate(student.lastseen) }}</td>
            <td *ngIf="student.token"> ----------- </td>
            <td>{{ student.approved || student.token == null ? 'Approved' : 'Pending' }}</td>
            <td class="actions">
              <button class="accept-btn" (click)="acceptStudent(student)" *ngIf="!student.approved && student.token != null">
                <i class='bx bx-check' style="color: green; font-size: 24px;"></i>
              </button>
              <button class="cancel-btn" (click)="cancelStudent(student)" *ngIf="!student.approved && student.token != null">
                <i class='bx bx-x' style="color: red; font-size: 24px;"></i>
              </button>
            </td>
          </tr>
          </tbody>
        </ng-container>

        <ng-template  #ifOption>
        <ng-container *ngIf="selectedOption === 'Administrators'; else showTeachers">
          <thead class="poppins-b">
            <tr>
              <th>Role</th>
              <th>Last Name</th>
              <th>First Name</th>
              <th>Email</th>
              <th>Last Seen</th>
            </tr>
          </thead>
          <tbody class="poppins">
            <tr>
          <tr *ngFor="let admin of admins" (click)="selectUser(admin)" [ngClass]="{ 'selected': selectedUser === admin }">
            <td>{{admin.role}}</td>
            <td>{{admin.lastname}}</td>
            <td>{{admin.firstname}}</td>
            <td>{{admin.email}}</td>
            <td>{{parseDate(admin.lastseen)}}</td>
          </tr>
        </tbody>
        </ng-container>
      </ng-template>
        <ng-template #showTeachers>
          <thead class="poppins-b">
            <tr>
              <th>Student ID</th>
              <th>Last Name</th>
              <th>First Name</th>
              <th>Email</th>
              <th>Last Seen</th>
            </tr>
          </thead>
          <tbody class="poppins">
          <tr *ngFor="let teacher of teachers" (click)="selectUser(teacher)" [ngClass]="{ 'selected': selectedUser === teacher }">
            <td>{{ teacher.visibleid }}</td>
            <td>{{ teacher.lastname }}</td>
            <td>{{ teacher.firstname }}</td>
            <td>{{ teacher.email }}</td>
            <td>{{ parseDate(teacher.lastseen) }}</td>
            <!-- <td>{{ teacher.approved ? 'Approved' : '' }}</td> -->
            <!-- <td class="actions">
              <button class="accept-btn" (click)="acceptTeacher(teacher)" *ngIf="!teacher.approved">
                <i class='bx bx-check' style="color: green; font-size: 24px;"></i>
              </button>
              <button class="cancel-btn" (click)="cancelTeacher(teacher)" *ngIf="!teacher.approved">
                <i class='bx bx-x' style="color: red; font-size: 24px;"></i>
              </button>
            </td> -->
          </tr>
        </tbody>
        </ng-template>

    </table>
  </div>
</div>
